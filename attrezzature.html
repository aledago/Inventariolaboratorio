<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario Attrezzature</title>
    
    <link rel="stylesheet" href="style.css"> 
    <link rel="stylesheet" href="attrezzatura.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="container">
        
        <nav class="navbar">
            <a href="attrezzature.html" class="nav-link active">üì¶ Attrezzatura</a>
            <a href="composti.html" class="nav-link">‚ò£Ô∏è Chimica</a>
            <a href="mappa.html" class="nav-link">üó∫Ô∏è Mappa</a>
        </nav>

        <div class="header-row">
            <h1>Inventario Attrezzature</h1>
            <button class="btn-add" onclick="apriModaleNuovo()">
                <i class="fas fa-plus"></i> <span>Nuovo Oggetto</span>
            </button>
        </div>

        <div class="filter-section">
            <input type="text" id="cercaAttrezzo" placeholder="Cerca attrezzatura..." onkeyup="applicaFiltri()">
            <select id="filtroArmadioRapido" onchange="applicaFiltri()">
                <option value="tutti">Tutti gli Armadi</option>
            </select>
        </div>

        <div id="listaAttrezzi" class="grid-container">
            </div>

    </div>

    <div id="modalAttrezzo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="titoloModale">Gestione Oggetto</h3>
                <span class="close-btn" onclick="chiudiModale()">&times;</span>
            </div>

            <div class="modal-body">
                <div class="form-group full-width">
                    <label>Nome Oggetto *</label>
                    <input type="text" id="inputNome" class="form-control" placeholder="Es. Becher 100ml">
                </div>
                
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="selectCategoria" class="form-control" onchange="gestisciInputCategoria(this)">
                        </select>
                    <input type="text" id="inputCategoria" class="form-control" placeholder="Nuova Categoria..." style="display:none; margin-top:5px;">
                </div>

                <div class="form-group">
                    <label>Quantit√†</label>
                    <input type="number" id="inputQuantita" class="form-control" value="1" min="1">
                </div>

                <div class="row-3-cols full-width">
                    <div>
                        <label>Armadio *</label>
                        <select id="selectArmadio" class="form-control" onchange="aggiornaRipiani()"></select>
                    </div>
                    <div>
                        <label>Ripiano</label>
                        <select id="selectRipiano" class="form-control" disabled></select>
                    </div>
                    <div>
                        <label>Quadrante</label>
                        <input type="text" id="inputQuadrante" class="form-control" placeholder="es. A1">
                    </div>
                </div>

                <div class="row-2-cols full-width">
                    <div>
                        <label>Capienza (opzionale)</label>
                        <input type="text" id="inputCapienza" class="form-control" placeholder="es. 100ml">
                    </div>
                    <div>
                        <label>Sensibilit√† (opzionale)</label>
                        <input type="text" id="inputSensibilita" class="form-control" placeholder="es. 0.01g">
                    </div>
                </div>
            </div>

            <div class="modal-footer" style="flex-direction: column; align-items: stretch;">
                
                <div id="footerNormal" style="display:flex; justify-content:flex-end; gap:10px; width:100%;">
                    <button type="button" class="btn-delete" id="btnMostraPanel" onclick="mostraPanelElimina()">
                        <i class="fas fa-trash"></i> ELIMINA
                    </button>
                    <button type="button" class="btn-save" id="btnSalva" onclick="salvaAttrezzatura()">
                        SALVA
                    </button>
                </div>

                <div id="panelPassword" style="display:none; background:#fee2e2; padding:15px; border-radius:8px; border:1px solid #ef4444; margin-top:10px;">
                    <p style="color:#b91c1c; font-weight:bold; margin-bottom:10px; font-size:0.9rem;">
                        <i class="fas fa-lock"></i> Area Riservata
                    </p>
                    <div style="display:flex; gap:10px;">
                        <input type="password" id="inputPassDelete" placeholder="Password Admin" 
                               style="flex:1; padding:8px; border:1px solid #ccc; border-radius:4px;">
                        <button onclick="eseguiEliminazione()" style="background:#dc2626; color:white; border:none; padding:8px 15px; border-radius:4px; cursor:pointer; font-weight:bold;">
                            CONFERMA
                        </button>
                        <button onclick="annullaEliminazione()" style="background:#e5e7eb; color:#374151; border:none; padding:8px 15px; border-radius:4px; cursor:pointer;">
                            ANNULLA
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="config_lab.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <script src="gestione_comune.js"></script>
    <script src="script_attrezzatura.js"></script>
</body>
</html>